<html>

<head>
</head>

<body>
    <div id="root"></div>

    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const root = document.getElementById("root")

        /**
         * If we want to run some code when our component is initialized, the
         *   componentDidMount lifecycle method is where that should go
         */
        // class Clock extends React.Component {
        //     constructor(props) {
        //         super(props);

        //         this.state = {
        //             date: new Date()
        //         }
        //     }

        //     componentDidMount() {
        //         setInterval(() => this.setState({ date: new Date() }), 1000)
        //     }

        //     render() {
        //         return (
        //             <div>{this.state.date.toLocaleTimeString()}</div>
        //         )
        //     }
        // }

        // ReactDOM.render(<Clock />, root)

        /**
         * If we need to perform some actions whenever our component is removed from the DOM,
         *   we do that in componentWillUnmount
         */
        class Clock extends React.Component {
            constructor(props) {
                super(props);

                this.state = {
                    date: new Date()
                }
            }

            componentDidMount = () => {
                // setInterval(() => this.setState({ date: new Date() }), 1000)
                this.timer = setInterval(() => this.setState({ date: new Date() }), 1000)
            }

            componentWillUnmount = () => {
                clearInterval(this.timer)
            }

            render() {
                return (
                    <div>{this.state.date.toLocaleTimeString()}</div>
                )
            }
        }

        class App extends React.Component {
            constructor(props) {
                super(props)

                this.state = { show: true }
            }

            toggle = () => {
                this.setState(prevState => ({ show: !prevState.show }))
            }

            render() {
                return (
                    <div>
                        <button onClick={this.toggle}>Toggle</button>
                        {this.state.show ? <Clock /> : null}
                    </div>
                )
            }
        }

        ReactDOM.render(<App />, root)
    </script>
</body>


</html>